# Production Environment Configuration for Cloud Deployment
# Copy this file to .env.production and update values

# ===========================================
# Application Settings
# ===========================================
DEBUG=false
ENVIRONMENT=production

# ===========================================
# Database Configuration
# ===========================================
POSTGRES_DATABASE_URL=postgresql+psycopg2://rag_user:CHANGE_THIS_PASSWORD@postgres:5432/rag_db

# ===========================================
# External Services
# ===========================================
OPENSEARCH_HOST=http://opensearch:9200
OPENSEARCH__HOST=http://opensearch:9200
OLLAMA_HOST=http://ollama:11434

# ===========================================
# LLM Configuration (Choose One)
# ===========================================
# Option 1: Use local Ollama (included in docker-compose)
OLLAMA__DEFAULT_MODEL=llama3.2:1b
OLLAMA__TIMEOUT=120
OLLAMA__MAX_RESPONSE_WORDS=300

# Option 2: Use OpenAI API (comment out Ollama, uncomment these)
# LLM_PROVIDER=openai
# OPENAI_API_KEY=sk-your-api-key-here
# OPENAI_MODEL=gpt-4o-mini
# OPENAI_MAX_TOKENS=500

# Option 3: Use Anthropic Claude API
# LLM_PROVIDER=anthropic
# ANTHROPIC_API_KEY=sk-ant-your-api-key-here
# ANTHROPIC_MODEL=claude-3-haiku-20240307
# ANTHROPIC_MAX_TOKENS=500

# ===========================================
# arXiv API Configuration
# ===========================================
ARXIV__MAX_RESULTS=50
ARXIV__BASE_URL=https://export.arxiv.org/api/query
ARXIV__PDF_CACHE_DIR=./data/arxiv_pdfs
ARXIV__RATE_LIMIT_DELAY=3.0
ARXIV__TIMEOUT_SECONDS=30
ARXIV__SEARCH_CATEGORY=cs.AI
ARXIV__DOWNLOAD_MAX_RETRIES=3
ARXIV__DOWNLOAD_RETRY_DELAY_BASE=5.0
ARXIV__MAX_CONCURRENT_DOWNLOADS=2
ARXIV__MAX_CONCURRENT_PARSING=1

# ===========================================
# PDF Parser Configuration
# ===========================================
PDF_PARSER__MAX_PAGES=35
PDF_PARSER__MAX_FILE_SIZE_MB=15
PDF_PARSER__DO_OCR=false
PDF_PARSER__DO_TABLE_STRUCTURE=false

# ===========================================
# OpenSearch Configuration
# ===========================================
OPENSEARCH__INDEX_NAME=arxiv-papers
OPENSEARCH__CHUNK_INDEX_SUFFIX=chunks
OPENSEARCH__MAX_TEXT_SIZE=1000000
OPENSEARCH__VECTOR_DIMENSION=1024
OPENSEARCH__VECTOR_SPACE_TYPE=cosinesimil
OPENSEARCH__RRF_PIPELINE_NAME=hybrid-rrf-pipeline
OPENSEARCH__HYBRID_SEARCH_SIZE_MULTIPLIER=2

# ===========================================
# Text Chunking Configuration
# ===========================================
CHUNKING__CHUNK_SIZE=600
CHUNKING__OVERLAP_SIZE=100
CHUNKING__MIN_CHUNK_SIZE=100

# ===========================================
# Jina AI Embeddings (Required for hybrid search)
# ===========================================
JINA_API_KEY=jina_your_api_key_here
EMBEDDINGS__MODEL=jina-embeddings-v3
EMBEDDINGS__TASK=retrieval.passage
EMBEDDINGS__DIMENSIONS=1024

# ===========================================
# Redis Caching (Week 6)
# ===========================================
REDIS__URL=redis://redis:6379/0
REDIS__CACHE_TTL_HOURS=24
REDIS__MAX_CONNECTIONS=10

# ===========================================
# Monitoring (Optional - Week 6)
# ===========================================
LANGFUSE__PUBLIC_KEY=pk-lf-your-key
LANGFUSE__SECRET_KEY=sk-lf-your-key
LANGFUSE__HOST=http://langfuse:3000
LANGFUSE__ENABLED=false
LANGFUSE__FLUSH_INTERVAL=1.0

# ===========================================
# Security (IMPORTANT for production!)
# ===========================================
# Generate secure secrets:
# python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=GENERATE_AND_PASTE_SECRET_HERE
API_KEY=GENERATE_AND_PASTE_API_KEY_HERE

# Allowed hosts/origins (your domain)
ALLOWED_HOSTS=your-domain.com,www.your-domain.com
CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
